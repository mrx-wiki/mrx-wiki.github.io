<!DOCTYPE html>
<html lang=><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> 9.autojs脚本 - gyk&#39;s blog</title>
    <meta name="description" content="1.mac搭建环境 ====================下载软件=======================
 1.下载模拟器 https://mumu.163.com/mac/index.html 2.下载编辑器 https://code.visualstudio.com/ 3.下载插件 Auto.js-Pro-Ext 4.下载autojs https://pro.autojs.org/ 5.申请坚果云账号  ====================连接步骤=======================
 1.在模拟器的autojs中连接电脑-客户端模式中输入电脑ip地址 2.编写代码 3.在编辑器中command &#43; shift &#43; p调出命令窗口输入autojs保存到指定设备 4.在模拟器的autojs中下拉刷新找到脚本运行  2.热更新原理 ======================热更新============================
 1.nodemon monitor.js后会自动监控源码main.js,发生改变后自动上传到坚果云 2.将热更新代码写入main.js，连接模拟器打包文件生成apk 3.每次修改代码后保存，视图自动更新  // 从坚果云下载脚本并执行 const CONFIG = { &#34;path&#34;: &#34;热更新/&#34;, &#34;scriptName&#34;:&#34;main.js&#34;, &#34;user&#34;: &#34;&#34;, &#34;key&#34;: &#34;&#34; } //定时下载脚本比对更新执行 let prevContent=&#34;&#34;; let currContent=&#34;&#34;; setInterval(() =&gt; { try { http.__okhttp__.setTimeout(20000); let currContent = http.get(&#39;http://dav.jianguoyun.com/dav/&#39;&#43;CONFIG.path&#43;CONFIG.scriptName, { headers: { &#34;Authorization&#34;: &#34;Basic &#34; &#43; java.lang.String(android.util.Base64.encode(java.lang.String(CONFIG.user &#43;&#39;:&#39; &#43; CONFIG.">
    <link rel="canonical" href="https://mrx-wiki.github.io/skill/9.autojs/">
    <meta property="og:title" content="9.autojs脚本">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://mrx-wiki.github.io/skill/9.autojs/">
    <meta property="og:description" content="1.mac搭建环境 ====================下载软件=======================
 1.下载模拟器 https://mumu.163.com/mac/index.html 2.下载编辑器 https://code.visualstudio.com/ 3.下载插件 Auto.js-Pro-Ext 4.下载autojs https://pro.autojs.org/ 5.申请坚果云账号  ====================连接步骤=======================
 1.在模拟器的autojs中连接电脑-客户端模式中输入电脑ip地址 2.编写代码 3.在编辑器中command &#43; shift &#43; p调出命令窗口输入autojs保存到指定设备 4.在模拟器的autojs中下拉刷新找到脚本运行  2.热更新原理 ======================热更新============================
 1.nodemon monitor.js后会自动监控源码main.js,发生改变后自动上传到坚果云 2.将热更新代码写入main.js，连接模拟器打包文件生成apk 3.每次修改代码后保存，视图自动更新  // 从坚果云下载脚本并执行 const CONFIG = { &#34;path&#34;: &#34;热更新/&#34;, &#34;scriptName&#34;:&#34;main.js&#34;, &#34;user&#34;: &#34;&#34;, &#34;key&#34;: &#34;&#34; } //定时下载脚本比对更新执行 let prevContent=&#34;&#34;; let currContent=&#34;&#34;; setInterval(() =&gt; { try { http.__okhttp__.setTimeout(20000); let currContent = http.get(&#39;http://dav.jianguoyun.com/dav/&#39;&#43;CONFIG.path&#43;CONFIG.scriptName, { headers: { &#34;Authorization&#34;: &#34;Basic &#34; &#43; java.lang.String(android.util.Base64.encode(java.lang.String(CONFIG.user &#43;&#39;:&#39; &#43; CONFIG.">
    <meta property="og:site_name" content="gyk&#39;s blog">
    <link rel="stylesheet" href="https://mrx-wiki.github.io/css/main.min.7fdf1d02dafd1a6eb5cfd0d707e17e33515b866f5d305a0ab01a4095577484fe.css" integrity="sha256-f98dAtr9Gm61z9DXB&#43;F&#43;M1Fbhm9dMFoKsBpAlVd0hP4=">
    <meta name="generator" content="Hugo 0.73.0" />
    <script type="module" src="https://unpkg.com/ionicons@5.1.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@5.1.2/dist/ionicons/ionicons.js"></script>

    
</head>
<body><header class="site-header">
    <nav class="site-nav" role="navigation" aria-label="breadcrumb">
    <ol itemscope itemtype="https://schema.org/BreadcrumbList" class="breadcrumb"><li class="breadcrumb-item  " 
  itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
  <a itemtype="https://schema.org/Thing" itemprop="item" href="https://mrx-wiki.github.io/">
    <span itemprop="name">gyk&#39;s blog</span>
  </a>
  <meta itemprop="position" content="0" />
</li>/<li class="breadcrumb-item  " 
  itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
  <a itemtype="https://schema.org/Thing" itemprop="item" href="https://mrx-wiki.github.io/skill/">
    <span itemprop="name">skill</span>
  </a>
  <meta itemprop="position" content="0" />
</li>/<li class="breadcrumb-item active hidden" aria-current="page"
  itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
  <a itemtype="https://schema.org/Thing" itemprop="item" href="https://mrx-wiki.github.io/skill/9.autojs/">
    <span itemprop="name">9.autojs</span>
  </a>
  <meta itemprop="position" content="1" />
</li></ol>
    </nav>
    <h1 class="site-title hidden">
    <a href="https://mrx-wiki.github.io/">gyk&#39;s blog</a>
    </h1>
</header>
<main id="content">
<article role="article" class="content post h-entry" itemscope="" itemtype="http://schema.org/BlogPosting">
    <header class="post-header">        
        <h2 class="post-title" itemprop="name headline">9.autojs脚本</h2>
        <span class="post-meta">
            <time class="date-published" datetime="2022-02-18T04:19:44&#43;07:00" itemprop="datePublished">
                Fri, 18 Feb 2022
            </time>
            
        </span>
    </header>
    <div class="post-content" itemprop="articleBody">
        <h2 id="1mac搭建环境">1.mac搭建环境</h2>
<p>====================下载软件=======================</p>
<ul>
<li>1.下载模拟器 <a href="https://mumu.163.com/mac/index.html">https://mumu.163.com/mac/index.html</a></li>
<li>2.下载编辑器 <a href="https://code.visualstudio.com/">https://code.visualstudio.com/</a></li>
<li>3.下载插件   Auto.js-Pro-Ext</li>
<li>4.下载autojs <a href="https://pro.autojs.org/">https://pro.autojs.org/</a></li>
<li>5.申请坚果云账号</li>
</ul>
<p>====================连接步骤=======================</p>
<ul>
<li>1.在模拟器的autojs中连接电脑-客户端模式中输入电脑ip地址</li>
<li>2.编写代码</li>
<li>3.在编辑器中command + shift + p调出命令窗口输入autojs保存到指定设备</li>
<li>4.在模拟器的autojs中下拉刷新找到脚本运行</li>
</ul>
<h2 id="2热更新原理">2.热更新原理</h2>
<p>======================热更新============================</p>
<ul>
<li>1.nodemon monitor.js后会自动监控源码main.js,发生改变后自动上传到坚果云</li>
<li>2.将热更新代码写入main.js，连接模拟器打包文件生成apk</li>
<li>3.每次修改代码后保存，视图自动更新</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// 从坚果云下载脚本并执行
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">CONFIG</span> <span style="color:#f92672">=</span> {
    <span style="color:#e6db74">&#34;path&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;热更新/&#34;</span>,
    <span style="color:#e6db74">&#34;scriptName&#34;</span><span style="color:#f92672">:</span><span style="color:#e6db74">&#34;main.js&#34;</span>,
    <span style="color:#e6db74">&#34;user&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;&#34;</span>, 
    <span style="color:#e6db74">&#34;key&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;&#34;</span>
}


<span style="color:#75715e">//定时下载脚本比对更新执行
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">prevContent</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>;
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">currContent</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span>;
<span style="color:#a6e22e">setInterval</span>(() =&gt; {
    <span style="color:#66d9ef">try</span> {
        <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">__okhttp__</span>.<span style="color:#a6e22e">setTimeout</span>(<span style="color:#ae81ff">20000</span>);
        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">currContent</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;http://dav.jianguoyun.com/dav/&#39;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">CONFIG</span>.<span style="color:#a6e22e">path</span><span style="color:#f92672">+</span><span style="color:#a6e22e">CONFIG</span>.<span style="color:#a6e22e">scriptName</span>, {
            <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> {
                <span style="color:#e6db74">&#34;Authorization&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Basic &#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">java</span>.<span style="color:#a6e22e">lang</span>.String(<span style="color:#a6e22e">android</span>.<span style="color:#a6e22e">util</span>.<span style="color:#a6e22e">Base64</span>.<span style="color:#a6e22e">encode</span>(<span style="color:#a6e22e">java</span>.<span style="color:#a6e22e">lang</span>.String(<span style="color:#a6e22e">CONFIG</span>.<span style="color:#a6e22e">user</span> <span style="color:#f92672">+</span><span style="color:#e6db74">&#39;:&#39;</span>  <span style="color:#f92672">+</span> <span style="color:#a6e22e">CONFIG</span>.<span style="color:#a6e22e">key</span>).<span style="color:#a6e22e">getBytes</span>(), <span style="color:#ae81ff">2</span>)),
                <span style="color:#e6db74">&#34;Content-Type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;text/plain;charset=UTF-8&#34;</span>,
                <span style="color:#e6db74">&#34;Connection&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Keep-Alive&#34;</span>,
                <span style="color:#e6db74">&#34;Accept-Encoding&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;gzip&#34;</span>,
                <span style="color:#e6db74">&#34;User-Agent&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;okhttp/3.12.1&#34;</span>
                }
            }
        ).<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">string</span>();
        <span style="color:#75715e">//如果文件有变化再去重新执行，没变化时保持原样
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">prevContent</span> <span style="color:#f92672">!=</span> <span style="color:#a6e22e">currContent</span>){
            <span style="color:#a6e22e">prevContent</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">currContent</span>;
            <span style="color:#a6e22e">engines</span>.<span style="color:#a6e22e">execScript</span>(<span style="color:#a6e22e">CONFIG</span>.<span style="color:#a6e22e">scriptName</span>,<span style="color:#a6e22e">currContent</span>);
        }<span style="color:#66d9ef">else</span>{
            <span style="color:#a6e22e">engines</span>.<span style="color:#a6e22e">execScript</span>(<span style="color:#a6e22e">CONFIG</span>.<span style="color:#a6e22e">scriptName</span>,<span style="color:#a6e22e">prevContent</span>);
        }
    } <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">error</span>) {
        <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#34;加载超时,请重启脚本,请检查网络.或者该文件已经被作者删除~~~&#34;</span>);
    }


},<span style="color:#ae81ff">15000</span>)

</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fs</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;fs&#39;</span>);
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">http</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#34;http&#34;</span>);

<span style="color:#75715e">//需要监听的目录
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">dir</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;/Users/gyk/desktop/autojs/&#34;</span>;

<span style="color:#75715e">//1.监控正在编写的autojs脚本
</span><span style="color:#75715e">//fs.watch的bug，文件改变时会自动调用2遍，采用时间戳的方式解决，待解决太瞌睡了，稍后弄
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">watch</span>(<span style="color:#a6e22e">dir</span>, (<span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">filename</span>) =&gt; {
  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">filename</span>) {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">filename</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">filename</span><span style="color:#f92672">==</span><span style="color:#e6db74">&#34;main.js&#34;</span>  <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">event</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;change&#34;</span>) {

      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`===========</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">filename</span><span style="color:#e6db74">}</span><span style="color:#e6db74">文件发生更改=========`</span>);

      <span style="color:#75715e">//2.当正在编写的autojs脚本发生改变时，读取并转化成字符串
</span><span style="color:#75715e"></span>      <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">contentStr</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
      <span style="color:#a6e22e">readAutojsFile</span>().<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">data</span>) =&gt; {
        <span style="color:#75715e">//3.将脚本字符串上传到坚果云
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">Jgy</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">JianGuoYunHelper</span>();
        <span style="color:#75715e">// 3.1 初始化坚果云
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">Jgy</span>.<span style="color:#a6e22e">init</span>(<span style="color:#e6db74">&#34;3060900582@qq.com&#34;</span>, <span style="color:#e6db74">&#34;akp3tixkb7epketq&#34;</span>, <span style="color:#e6db74">&#34;热更新&#34;</span>);  
        <span style="color:#75715e">// 3.2 推送数据到坚果云
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">Jgy</span>.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;main.js&#34;</span>,<span style="color:#a6e22e">data</span>).<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">result</span>) =&gt; {
          <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;上传结果：&#34;</span><span style="color:#f92672">+</span><span style="color:#a6e22e">result</span>)
        });
      })
      
      
      <span style="color:#75715e">// 获取数据
</span><span style="color:#75715e"></span>      <span style="color:#75715e">// Jgy.get(&#34;version.txt&#34;).then((data) =&gt;{
</span><span style="color:#75715e"></span>      <span style="color:#75715e">//   console.log(&#34;====remoteData======&#34;+data);
</span><span style="color:#75715e"></span>      <span style="color:#75715e">// });
</span><span style="color:#75715e"></span>
      <span style="color:#75715e">//删除数据
</span><span style="color:#75715e"></span>      <span style="color:#75715e">//Jgy.delete(&#34;version.txt&#34;);
</span><span style="color:#75715e"></span>    }
  }
});



<span style="color:#75715e">//坚果云上传下载
</span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">JianGuoYunHelper</span>() {
  <span style="color:#75715e">//构造函数✅
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">JgySDK</span>() {};

  <span style="color:#75715e">//初始化✅
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">JgySDK</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">init</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">username</span>, <span style="color:#a6e22e">password</span>, <span style="color:#a6e22e">folderName</span>) {
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">folderName</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">folderName</span>;
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">jgyHost</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http://dav.jianguoyun.com/dav/&#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">folderName</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/&#34;</span>;
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getBase64</span>(<span style="color:#a6e22e">username</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;:&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">password</span>);
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">header</span> <span style="color:#f92672">=</span> {
      <span style="color:#e6db74">&#34;Authorization&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Basic &#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">key</span>,
      <span style="color:#e6db74">&#34;Content-Type&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;text/plain;charset=UTF-8&#34;</span>,
      <span style="color:#e6db74">&#34;Connection&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Keep-Alive&#34;</span>,
      <span style="color:#e6db74">&#34;Accept-Encoding&#34;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;gzip,deflate,br&#34;</span>
    };
    <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">fileName</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
  };

  <span style="color:#75715e">//添加一个文件内容(覆盖)
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">JgySDK</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">put</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">fileName</span>,<span style="color:#a6e22e">data</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Promise((<span style="color:#a6e22e">resolve</span>,<span style="color:#a6e22e">reject</span>) =&gt; {
        <span style="color:#75715e">//判断文件名非空
</span><span style="color:#75715e"></span>       <span style="color:#a6e22e">fileName</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getThisFileName</span>(<span style="color:#a6e22e">fileName</span>);
      <span style="color:#75715e">//判断数据非空
</span><span style="color:#75715e"></span>      <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">data</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">!=</span><span style="color:#e6db74">&#34;&#34;</span>){
        <span style="color:#75715e">//推送数据
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">request</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">jgyHost</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">fileName</span>, {
          <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;PUT&#34;</span>,
          <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">header</span>
        }).<span style="color:#a6e22e">end</span>(<span style="color:#a6e22e">data</span>,<span style="color:#e6db74">&#34;utf-8&#34;</span>,()=&gt;{
          <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;上传进度:完成&#34;</span>)
          <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">fileName</span>).<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">remoteData</span>) =&gt; {
            <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">remoteData</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">data</span>){
              <span style="color:#a6e22e">resolve</span>(<span style="color:#e6db74">&#34;本地数据 推送到 坚果云 成功&#34;</span>);
            }
          })
        });
      }
    })
  };

  <span style="color:#75715e">//删除一个文件内容
</span><span style="color:#75715e"></span><span style="color:#a6e22e">JgySDK</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#66d9ef">delete</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">fileName</span>){
  <span style="color:#a6e22e">fileName</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getThisFileName</span>(<span style="color:#a6e22e">fileName</span>);
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">httpReq</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">request</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">jgyHost</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">fileName</span>,{
    <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;DELETE&#34;</span>,
    <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">header</span>,
  },(<span style="color:#a6e22e">httpRes</span>) =&gt; {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">chunks</span> <span style="color:#f92672">=</span> [];

    <span style="color:#a6e22e">httpRes</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#34;data&#34;</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">chunk</span>) {
      <span style="color:#a6e22e">chunks</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">chunk</span>);
    });

    <span style="color:#a6e22e">httpRes</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#34;end&#34;</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">chunk</span>) {
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">body</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Buffer</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">chunks</span>);
      <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">body</span>.<span style="color:#a6e22e">toString</span>());
    });
  });
  <span style="color:#a6e22e">httpReq</span>.<span style="color:#a6e22e">end</span>();
    
}

  <span style="color:#75715e">//查找一个文件内容✅
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">JgySDK</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">get</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">fileName</span>) {
    <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">rawData</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>;
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Promise((<span style="color:#a6e22e">resolve</span>,<span style="color:#a6e22e">reject</span>) =&gt; {
      <span style="color:#75715e">//判断filename非空
</span><span style="color:#75715e"></span>      <span style="color:#a6e22e">fileName</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">getThisFileName</span>(<span style="color:#a6e22e">fileName</span>);
      <span style="color:#75715e">//请求对应文件
</span><span style="color:#75715e"></span>      <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">get</span>(<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">jgyHost</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">fileName</span>, {
        <span style="color:#a6e22e">headers</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">header</span>,
      },(<span style="color:#a6e22e">httpRes</span>) =&gt; {
        <span style="color:#75715e">// 请求失败
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">httpRes</span>.<span style="color:#a6e22e">statusCode</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">404</span>) {
            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">errorMsg</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;无备份文件,文件名:&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">fileName</span>;
            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">errorMsg</span>);
            <span style="color:#66d9ef">return</span>;
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">httpRes</span>.<span style="color:#a6e22e">statusCode</span> <span style="color:#f92672">==</span> <span style="color:#ae81ff">200</span>) {
          <span style="color:#75715e">//请求成功
</span><span style="color:#75715e"></span>          <span style="color:#a6e22e">httpRes</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#34;data&#34;</span>,(<span style="color:#a6e22e">chunk</span>) =&gt; {
            <span style="color:#a6e22e">rawData</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">chunk</span>;
          })

          <span style="color:#a6e22e">httpRes</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#34;end&#34;</span>,() =&gt; {
            <span style="color:#a6e22e">resolve</span>(<span style="color:#a6e22e">rawData</span>)
          })
        } <span style="color:#66d9ef">else</span> {
          <span style="color:#75715e">//其他状态
</span><span style="color:#75715e"></span>          <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;其他状态码，不予以处理&#34;</span>);
          <span style="color:#66d9ef">return</span>;
        }
      });
    })
  };
  

  <span style="color:#75715e">//==========================辅助函数==================
</span><span style="color:#75715e"></span>  <span style="color:#75715e">//判断fileName非空
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">JgySDK</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">getThisFileName</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">fileName</span>) {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">fileName</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">void</span> <span style="color:#ae81ff">0</span>) {
      <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">fileName</span> <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;&#34;</span>) {
        <span style="color:#a6e22e">fileName</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">fileName</span>;
      } <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">throw</span> <span style="color:#e6db74">&#34;当前必须传fileName, 调用setThisFileName后,才可以不传fileName&#34;</span>;
      }
    }
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fileName</span>;
  };

  <span style="color:#75715e">//获取base64 结果
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">JgySDK</span>.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">getBase64</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">str</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Base64</span>.<span style="color:#a6e22e">encode</span>(<span style="color:#a6e22e">str</span>);
    <span style="color:#75715e">//return java.lang.String(android.util.Base64.encode(java.lang.String(str).getBytes(), 2));
</span><span style="color:#75715e"></span>  };
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">JgySDK</span>();
}

<span style="color:#75715e">//base64编码解码
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">Base64</span> <span style="color:#f92672">=</span> {
  <span style="color:#75715e">// public method for encoding  
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">encode</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">input</span>) {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">_keyStr</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=&#34;</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">output</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">chr1</span>, <span style="color:#a6e22e">chr2</span>, <span style="color:#a6e22e">chr3</span>, <span style="color:#a6e22e">enc1</span>, <span style="color:#a6e22e">enc2</span>, <span style="color:#a6e22e">enc3</span>, <span style="color:#a6e22e">enc4</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#a6e22e">input</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">_utf8_encode</span>(<span style="color:#a6e22e">input</span>);
    <span style="color:#66d9ef">while</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">length</span>) {
      <span style="color:#a6e22e">chr1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">charCodeAt</span>(<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>);
      <span style="color:#a6e22e">chr2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">charCodeAt</span>(<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>);
      <span style="color:#a6e22e">chr3</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">charCodeAt</span>(<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>);
      <span style="color:#a6e22e">enc1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">chr1</span> <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">2</span>;
      <span style="color:#a6e22e">enc2</span> <span style="color:#f92672">=</span> ((<span style="color:#a6e22e">chr1</span> <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">3</span>) <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">4</span>) <span style="color:#f92672">|</span> (<span style="color:#a6e22e">chr2</span> <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">4</span>);
      <span style="color:#a6e22e">enc3</span> <span style="color:#f92672">=</span> ((<span style="color:#a6e22e">chr2</span> <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">15</span>) <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">|</span> (<span style="color:#a6e22e">chr3</span> <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">6</span>);
      <span style="color:#a6e22e">enc4</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">chr3</span> <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">63</span>;
      <span style="color:#66d9ef">if</span> (isNaN(<span style="color:#a6e22e">chr2</span>)) {
        <span style="color:#a6e22e">enc3</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">enc4</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">64</span>;
      } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (isNaN(<span style="color:#a6e22e">chr3</span>)) {
        <span style="color:#a6e22e">enc4</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">64</span>;
      }
      <span style="color:#a6e22e">output</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">output</span> <span style="color:#f92672">+</span>
        <span style="color:#a6e22e">_keyStr</span>.<span style="color:#a6e22e">charAt</span>(<span style="color:#a6e22e">enc1</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">_keyStr</span>.<span style="color:#a6e22e">charAt</span>(<span style="color:#a6e22e">enc2</span>) <span style="color:#f92672">+</span>
        <span style="color:#a6e22e">_keyStr</span>.<span style="color:#a6e22e">charAt</span>(<span style="color:#a6e22e">enc3</span>) <span style="color:#f92672">+</span> <span style="color:#a6e22e">_keyStr</span>.<span style="color:#a6e22e">charAt</span>(<span style="color:#a6e22e">enc4</span>);
    }
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">output</span>;
  },
  <span style="color:#75715e">// public method for decoding  
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">decode</span> <span style="color:#f92672">:</span><span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">input</span>) {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">_keyStr</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=&#34;</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">output</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">chr1</span>, <span style="color:#a6e22e">chr2</span>, <span style="color:#a6e22e">chr3</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">enc1</span>, <span style="color:#a6e22e">enc2</span>, <span style="color:#a6e22e">enc3</span>, <span style="color:#a6e22e">enc4</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#a6e22e">input</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">replace</span>(<span style="color:#e6db74">/[^A-Za-z0-9\+\/\=]/g</span>, <span style="color:#e6db74">&#34;&#34;</span>);
    <span style="color:#66d9ef">while</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">length</span>) {
      <span style="color:#a6e22e">enc1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">_keyStr</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">charAt</span>(<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>));
      <span style="color:#a6e22e">enc2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">_keyStr</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">charAt</span>(<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>));
      <span style="color:#a6e22e">enc3</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">_keyStr</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">charAt</span>(<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>));
      <span style="color:#a6e22e">enc4</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">_keyStr</span>.<span style="color:#a6e22e">indexOf</span>(<span style="color:#a6e22e">input</span>.<span style="color:#a6e22e">charAt</span>(<span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>));
      <span style="color:#a6e22e">chr1</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">enc1</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">2</span>) <span style="color:#f92672">|</span> (<span style="color:#a6e22e">enc2</span> <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">4</span>);
      <span style="color:#a6e22e">chr2</span> <span style="color:#f92672">=</span> ((<span style="color:#a6e22e">enc2</span> <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">15</span>) <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">4</span>) <span style="color:#f92672">|</span> (<span style="color:#a6e22e">enc3</span> <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">2</span>);
      <span style="color:#a6e22e">chr3</span> <span style="color:#f92672">=</span> ((<span style="color:#a6e22e">enc3</span> <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">3</span>) <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">6</span>) <span style="color:#f92672">|</span> <span style="color:#a6e22e">enc4</span>;
      <span style="color:#a6e22e">output</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">output</span> <span style="color:#f92672">+</span> String.<span style="color:#a6e22e">fromCharCode</span>(<span style="color:#a6e22e">chr1</span>);
      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">enc3</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">64</span>) {
        <span style="color:#a6e22e">output</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">output</span> <span style="color:#f92672">+</span> String.<span style="color:#a6e22e">fromCharCode</span>(<span style="color:#a6e22e">chr2</span>);
      }
      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">enc4</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">64</span>) {
        <span style="color:#a6e22e">output</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">output</span> <span style="color:#f92672">+</span> String.<span style="color:#a6e22e">fromCharCode</span>(<span style="color:#a6e22e">chr3</span>);
      }
    }
    <span style="color:#a6e22e">output</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">_utf8_decode</span>(<span style="color:#a6e22e">output</span>);
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">output</span>;
  },
  <span style="color:#75715e">// private method for UTF-8 encoding  
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">_utf8_encode</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">string</span>) {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">string</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">string</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;&#39;</span>).<span style="color:#a6e22e">replace</span>(<span style="color:#e6db74">/\r\n/g</span>, <span style="color:#e6db74">&#34;\n&#34;</span>);
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">utftext</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">n</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">n</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">string</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">n</span><span style="color:#f92672">++</span>) {
      <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">c</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">string</span>.<span style="color:#a6e22e">charCodeAt</span>(<span style="color:#a6e22e">n</span>);
      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">c</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">128</span>) {
        <span style="color:#a6e22e">utftext</span> <span style="color:#f92672">+=</span> String.<span style="color:#a6e22e">fromCharCode</span>(<span style="color:#a6e22e">c</span>);
      } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> ((<span style="color:#a6e22e">c</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">127</span>) <span style="color:#f92672">&amp;&amp;</span> (<span style="color:#a6e22e">c</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2048</span>)) {
        <span style="color:#a6e22e">utftext</span> <span style="color:#f92672">+=</span> String.<span style="color:#a6e22e">fromCharCode</span>((<span style="color:#a6e22e">c</span> <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">6</span>) <span style="color:#f92672">|</span> <span style="color:#ae81ff">192</span>);
        <span style="color:#a6e22e">utftext</span> <span style="color:#f92672">+=</span> String.<span style="color:#a6e22e">fromCharCode</span>((<span style="color:#a6e22e">c</span> <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">63</span>) <span style="color:#f92672">|</span> <span style="color:#ae81ff">128</span>);
      } <span style="color:#66d9ef">else</span> {
        <span style="color:#a6e22e">utftext</span> <span style="color:#f92672">+=</span> String.<span style="color:#a6e22e">fromCharCode</span>((<span style="color:#a6e22e">c</span> <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">12</span>) <span style="color:#f92672">|</span> <span style="color:#ae81ff">224</span>);
        <span style="color:#a6e22e">utftext</span> <span style="color:#f92672">+=</span> String.<span style="color:#a6e22e">fromCharCode</span>(((<span style="color:#a6e22e">c</span> <span style="color:#f92672">&gt;&gt;</span> <span style="color:#ae81ff">6</span>) <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">63</span>) <span style="color:#f92672">|</span> <span style="color:#ae81ff">128</span>);
        <span style="color:#a6e22e">utftext</span> <span style="color:#f92672">+=</span> String.<span style="color:#a6e22e">fromCharCode</span>((<span style="color:#a6e22e">c</span> <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">63</span>) <span style="color:#f92672">|</span> <span style="color:#ae81ff">128</span>);
      }
    }
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">utftext</span>;
  },
  <span style="color:#75715e">// private method for UTF-8 decoding  
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">_utf8_decode</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">utftext</span>) {
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">c</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">c1</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, <span style="color:#a6e22e">c2</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">c3</span>;
    <span style="color:#66d9ef">while</span> (<span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">utftext</span>.<span style="color:#a6e22e">length</span>) {
      <span style="color:#a6e22e">c</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">utftext</span>.<span style="color:#a6e22e">charCodeAt</span>(<span style="color:#a6e22e">i</span>);
      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">c</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">128</span>) {
        <span style="color:#a6e22e">string</span> <span style="color:#f92672">+=</span> String.<span style="color:#a6e22e">fromCharCode</span>(<span style="color:#a6e22e">c</span>);
        <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>;
      } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> ((<span style="color:#a6e22e">c</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">191</span>) <span style="color:#f92672">&amp;&amp;</span> (<span style="color:#a6e22e">c</span> <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">224</span>)) {
        <span style="color:#a6e22e">c2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">utftext</span>.<span style="color:#a6e22e">charCodeAt</span>(<span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
        <span style="color:#a6e22e">string</span> <span style="color:#f92672">+=</span> String.<span style="color:#a6e22e">fromCharCode</span>(((<span style="color:#a6e22e">c</span> <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">31</span>) <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">6</span>) <span style="color:#f92672">|</span> (<span style="color:#a6e22e">c2</span> <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">63</span>));
        <span style="color:#a6e22e">i</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">2</span>;
      } <span style="color:#66d9ef">else</span> {
        <span style="color:#a6e22e">c2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">utftext</span>.<span style="color:#a6e22e">charCodeAt</span>(<span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>);
        <span style="color:#a6e22e">c3</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">utftext</span>.<span style="color:#a6e22e">charCodeAt</span>(<span style="color:#a6e22e">i</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">2</span>);
        <span style="color:#a6e22e">string</span> <span style="color:#f92672">+=</span> String.<span style="color:#a6e22e">fromCharCode</span>(((<span style="color:#a6e22e">c</span> <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">15</span>) <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">12</span>) <span style="color:#f92672">|</span> ((<span style="color:#a6e22e">c2</span> <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">63</span>) <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">6</span>) <span style="color:#f92672">|</span> (<span style="color:#a6e22e">c3</span> <span style="color:#f92672">&amp;</span> <span style="color:#ae81ff">63</span>));
        <span style="color:#a6e22e">i</span> <span style="color:#f92672">+=</span> <span style="color:#ae81ff">3</span>;
      }
    }
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">string</span>;
  }
}
<span style="color:#75715e">//读取本地脚本文件转为字符串
</span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">readAutojsFile</span>(){
  <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Promise((<span style="color:#a6e22e">resolve</span>,<span style="color:#a6e22e">reject</span>) =&gt; {
    <span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">readFile</span>(<span style="color:#e6db74">&#39;./main.js&#39;</span>,<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">error</span>,<span style="color:#a6e22e">data</span>){
      <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">error</span>){
          <span style="color:#a6e22e">reject</span>(<span style="color:#e6db74">&#39;error&#39;</span>);
      }<span style="color:#66d9ef">else</span>{
        <span style="color:#a6e22e">contentStr</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">toString</span>();
        <span style="color:#a6e22e">resolve</span>(<span style="color:#a6e22e">contentStr</span>)
      }
    })
  })
}


</code></pre></div><p><img src="https://s3.bmp.ovh/imgs/2022/02/bca966cfc2e5012b.png" alt=""></p>
<h2 id="3代码加密原理">3.代码加密原理</h2>
<p>====================代码加密=======================</p>

    </div>
    <video id="my_video" style="height: 300px;width:100%" controls="controls"></video>
</article>

<div class="pagination">
    
    <div class="prev"> <a href="https://mrx-wiki.github.io/skill/8.%E4%BD%93%E5%BD%A9/">Previous Post</a> </div>
    
    
    <div class="next"> <a href="https://mrx-wiki.github.io/skill/10.%E5%8D%AB%E6%98%9F%E8%B7%9F%E8%B8%AA%E7%A0%94%E7%A9%B6/">Next Post</a> </div>
    
</div>




</script>
<script>
    try{
        
        let src = document.getElementsByTagName('code')[0].innerText;
        
        if(src.indexOf("mp4")!=-1){
            document.getElementById('my_video').setAttribute("src",src)
        }else{
            
            let video = document.getElementById('my_video');
            if (video != null){
                video.parentNode.removeChild(video);
            }
            
            
        }
    }catch(e){
        
        let video = document.getElementById('my_video');
        if (video != null){
            video.parentNode.removeChild(video);
        }
    }
    
    
    
    
</script>













        </main><footer class="site-footer">
	<span class="right">
		<em>gyk&#39;s blog</em>
	</span>
</footer>
</body>
    <script type="text/javascript">
        
        let show_flag=true;
        
        function pass() {
            while(show_flag){
             let token = window.prompt("登陆码","");
             if(token==="888888"){
                 show_flag=false;
             }else{
                 show_flag=true;
             }
            }
        }


        let timer_flag = document.getElementsByClassName("post-content")[0].innerHTML === '\n        <h2 id="timer">timer</h2>\n\n    ';






    </script>
</html>
